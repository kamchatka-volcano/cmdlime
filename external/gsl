include(FetchContent)
Set(FETCHCONTENT_QUIET FALSE)

if (NOT TARGET Microsoft.GSL AND NOT Microsoft.GSL_FOUND)
    FetchContent_Declare(
            gsl
            GIT_REPOSITORY https://github.com/microsoft/GSL
            GIT_TAG        v3.1.0
            GIT_SHALLOW    ON
            GIT_PROGRESS TRUE
    )

    if (INSTALL_GSL)
        FetchContent_MakeAvailable(gsl)
    else()
        FetchContent_GetProperties(gsl)
        if(NOT gsl_POPULATED)
            FetchContent_Populate(gsl)
            add_subdirectory("${gsl_SOURCE_DIR}" "${gsl_BINARY_DIR}" EXCLUDE_FROM_ALL)
        endif()
    endif()
endif()